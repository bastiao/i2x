$(function() {
	$('#edit_template_payload_select').on('change', edit_update_payload);
});

/**
 *	Handles reloading forms on changing template publisher.
 **/
function edit_update_payload(event) {
	event.preventDefault();
	publisher = $(this).find(':selected').val();
	if (publisher === 'file') {
		$('#edit_template_payload').html("<%= j render(:partial => 'payload_file', :locals => {:template => @template}) %>");
	} else if (publisher === 'mail') {
		$('#edit_template_payload').html("<%= j render(:partial => 'payload_mail', :locals => {:template => @template}) %>");
	} else if (publisher === 'sql') {
		$('#edit_template_payload').html("<%= j render(:partial => 'payload_sql', :locals => {:template => @template}) %>");
	} else if (publisher === 'url') {
		$('#edit_template_payload').html("<%= j render(:partial => 'payload_url', :locals => {:template => @template}) %>");
	} else if (publisher === 'dropbox') {
		$('#edit_template_payload').html("<%= j render(:partial => 'payload_dropbox', :locals => {:template => @template}) %>");
	} 
}